#:kivy 1.9.0

<RootScreen>:
	LoginView:
    ProductView:
    ScannerView:
    IpView:
    BasketView:

<LoginView>:
	name: "LoginView"
	GridLayout:
		cols: 2
		Label:
			text: "username"
		TextInput:
			id: txtUsername
			multiline: False
		Label:
			text: "password"
		TextInput:
			id: txtPassword
			password: True
			multiline: False
		Button:
			text: "Exit"
			on_press: app.stop()
		Button:
			text: "Login"
			on_press: root.login()

<ProductView>:
	name: "ProductView"
	on_pre_enter:
		self.getProduct()
	BoxLayout:
		size: root.size
		orientation: "vertical"
		padding: 20
		spacing: 10

		AsyncImage:
			id: product_image
			size_hint: 1, 0.69
			source: "https://colruyt.collectandgo.be/cogo/step/JPG/JPG/500x500/std.lang.all/64/86/asset-366486.jpg"

		Label:
			id: product_description
			text: "Product desciption"
			size_hint: 1, 0.1
			halign: "center"

		Label:
			id: lblAmount
			text: "%s stuk(s)" % (root.amount)
			size_hint: 1, 0.1
			halign: "center"

		ProgressBar:
			id: pbProgress
			size_hint: 1, 0.01
			max: 100

		BoxLayout:
			size_hint: 1, 0.1
			orientation: "horizontal"
			spacing: 20
			Button:
				text: "Cancel"
				size_hint: 0.25, 1
				on_press:
					root.manager.go_back("ScannerView")
			Button:
				text: "-"
				size_hint: 0.25, 1
				on_press: root.decrease()
			Button:
				text: "+"
				size_hint: 0.25, 1
				on_press: root.increase()
			Button:
				text: "Ok"
				size_hint: 0.25, 1
				on_press: root.confirm()

<ScannerView>:
	name: "ScannerView"
	on_pre_enter:
		self.setCallback()
	BoxLayout:
		size: root.size
		orientation: "vertical"
		padding: 20
		spacing: 10

		Label:
			text: "Scan your product"
			size_hint: 1, 0.9
			halign: "center"

		BoxLayout:
			size_hint: 1, 0.1
			orientation: "horizontal"
			spacing: 20

			Button:
				text: "Exit"
				size_hint: 0.25, 1
				on_press: app.stop()

			Button:
				text: "Log out"
				size_hint: 0.25, 1
				on_press: root.logout()

			Button:
				text: "View ip"
				size_hint: 0.25, 1
				on_press:
					root.manager.go_next("IpView")

			Button:
				text: "Basket"
				size_hint: 0.25, 1
				on_press:
					root.manager.go_next("BasketView")

<IpView>:
	name: "IpView"
	BoxLayout:
		size: root.size
		orientation: "vertical"
		padding: 20
		spacing: 10

		Label:
			id: lblIp
			text: "Your IP is %s" % (root.ip)
			size_hint: 1, 0.9
			halign: "center"

		BoxLayout:
			size_hint: 1, 0.1
			orientation: "horizontal"
			spacing: 20

			Button:
				text: "Back"
				size_hint: 0.25, 1
				on_press:
					root.manager.go_back("ScannerView")

<BasketView>:
	name: "BasketView"
	BoxLayout:
		size: root.size
		orientation: "vertical"
		padding: 20
		spacing: 10

		Label:
			id: lblIp
			text: "Basket"
			size_hint: 1, 0.9
			halign: "center"

		BoxLayout:
			size_hint: 1, 0.1
			orientation: "horizontal"
			spacing: 20

			Button:
				text: "Back"
				size_hint: 0.25, 1
				on_press:
					root.manager.go_back("ScannerView")
